{"version":3,"file":"Slideshow.jsx","sourceRoot":"","sources":["Slideshow.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport { Box } from \"@chakra-ui/react\";\nimport { AnimatePresence, PanInfo } from \"motion/react\";\nimport { wrap } from \"popmotion\";\n\nimport Allow from \"./Arrow\";\nimport CustomImage from \"./CustomImage\";\nimport { ImageText } from \"./ImageText\";\nimport { MotionBox } from \"./MotionBox\";\nimport Selector from \"./Selector\";\nimport type { SlideshowProps } from \"./types\";\n\n//This number 10000 acts like a minimum \"swipe power\" to be considered a valid swipe.\nconst swipeConfidenceThreshold = 10000;\n\nfunction swipePower(offset: number, velocity: number): number {\n  return Math.abs(offset) * velocity;\n}\n\nfunction getVariants() {\n  return {\n    enter(direction: number) {\n      return {\n        x: direction > 0 ? 1000 : -1000,\n        opacity: 0,\n      };\n    },\n    center: {\n      zIndex: 1,\n      x: 0,\n      opacity: 1,\n      transition: { duration: 0.5 },\n    },\n    exit(direction: number) {\n      return {\n        zIndex: 0,\n        x: direction < 0 ? 1000 : -1000,\n        opacity: 0,\n        transition: { duration: 0.5 },\n      };\n    },\n  };\n}\n\nfunction Slideshow({\n  slideDuration = 5000, // 5 seconds\n  images,\n  arrowConfig,\n  selectorConfig,\n  textConfig,\n  imageConfig,\n}: SlideshowProps) {\n  const [check, setCheck] = useState(0);\n  const [refIsLoaded, setRefIsLoaded] = useState(false);\n  const [paused, setPaused] = useState(false);\n  const [[page, direction], setPage] = useState<[number, number]>([0, 0]);\n\n  const imageIndex = wrap(0, images.length, page);\n\n  useEffect(\n    function setupTimer() {\n      if (paused) return;\n      const timeoutID = setTimeout(function handleTimeout() {\n        paginate(1);\n        resetTimer();\n      }, slideDuration);\n      return function cleanup() {\n        clearTimeout(timeoutID);\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [check, paused],\n  );\n\n  const paginate = useCallback((newDirection: number) => {\n    setPage(([prevPage]) => [prevPage + newDirection, newDirection]);\n  }, []);\n\n  const resetTimer = useCallback(() => {\n    setCheck((prev) => prev + 1);\n  }, []);\n\n  function imageProps(index: number) {\n    return {\n      src: images[index].url,\n      alt: \"image\",\n      layout: \"fill\",\n      objectFit: \"cover\",\n      objectPosition: \"50% 0\",\n    };\n  }\n\n  return (\n    <Box w=\"100%\" h=\"100%\" position=\"relative\">\n      <AnimatePresence initial={false} custom={direction}>\n        <MotionBox\n          key={page}\n          custom={direction}\n          variants={getVariants()}\n          initial=\"enter\"\n          animate=\"center\"\n          exit=\"exit\"\n          transition={\n            {\n              x: { type: \"spring\", stiffness: 300, damping: 30 },\n              opacity: { duration: 0.2 },\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            } as any\n          }\n          w=\"100%\"\n          h=\"100%\"\n          position=\"absolute\"\n        >\n          <CustomImage\n            setMethod={setRefIsLoaded}\n            {...imageProps(imageIndex)}\n            h=\"100%\"\n            w=\"100%\"\n            onPointerDown={() => {\n              setPaused(true);\n            }}\n            onPointerUp={() => {\n              setPaused(false);\n              resetTimer();\n            }}\n            drag={imageConfig?.grab === false ? false : \"x\"}\n            dragConstraints={{ left: 0, right: 0 }}\n            dragElastic={1}\n            // @ts-ignore\n            onDragEnd={(\n              _: MouseEvent | TouchEvent | PointerEvent,\n              { offset, velocity }: PanInfo,\n            ) => {\n              const swipe = swipePower(offset.x, velocity.x);\n              if (swipe < -swipeConfidenceThreshold) {\n                paginate(1);\n              } else if (swipe > swipeConfidenceThreshold) {\n                paginate(-1);\n              }\n              resetTimer();\n              setPaused(false);\n            }}\n          />\n          {textConfig?.disable !== true && refIsLoaded && (\n            <ImageText text={images[imageIndex].text} />\n          )}\n        </MotionBox>\n      </AnimatePresence>\n      {arrowConfig?.disable !== true && (\n        <>\n          <Allow\n            paginate={paginate}\n            resetTimer={resetTimer}\n            direction=\"left\"\n            style={arrowConfig?.style}\n          />\n          <Allow\n            paginate={paginate}\n            resetTimer={resetTimer}\n            direction=\"right\"\n            style={arrowConfig?.style}\n          />\n        </>\n      )}\n\n      {selectorConfig?.disable !== true && (\n        <Selector\n          images={images}\n          imageIndex={imageIndex}\n          paginate={paginate}\n          resetTimer={resetTimer}\n        />\n      )}\n    </Box>\n  );\n}\n\nexport default Slideshow;\n"]}